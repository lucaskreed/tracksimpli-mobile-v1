<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="theme-color" content="#000000" />
  <title>TrackSimpli • Test</title>

  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.15.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/pose-detection"></script>

  <link rel="stylesheet" href="../css/base.css" />
  <link rel="stylesheet" href="../css/layout.css" />
  <link rel="stylesheet" href="../css/components.css" />
</head>
<body data-page="test" style="background:#000;">
  <div class="camera-stage">
    <video id="video" class="camera-video" playsinline></video>
    <canvas id="overlay" class="camera-overlay"></canvas>
  </div>

  <div class="test-topbar">
    <div class="test-title" id="testTitle">Test</div>
    <div class="badge" id="badge">Loading…</div>
    <button class="icon-btn" id="btnStats" type="button" aria-label="Stats">📊</button>
  </div>

  <div class="hud">
    <div class="hud-row">
      <div class="hud-count" id="count">0</div>
      <div class="hud-chips">
        <div class="chip" id="chipTime">00:00</div>
        <div class="chip" id="chipQuality">Quality: —</div>
        <div class="chip">
          <select id="testSelect" class="select" style="padding:8px 10px;border-radius:999px;"></select>
        </div>
      </div>
    </div>
    <div class="hud-controls">
      <button class="btn primary" id="btnStart" type="button">START</button>
      <button class="btn ghost" id="btnPause" type="button" disabled>PAUSE</button>
      <button class="btn" id="btnEnd" type="button" disabled>END</button>
    </div>
  </div>

  <aside class="drawer" id="drawer" aria-label="Stats drawer">
    <h2>Stats</h2>
    <div class="drawer-card">
      <div class="kv"><div class="k">Today</div><div class="v" id="dToday">—</div></div>
      <div class="kv"><div class="k">Personal best</div><div class="v" id="dPB">—</div></div>
      <div class="kv"><div class="k">Streak</div><div class="v" id="dStreak">—</div></div>
      <div class="kv"><div class="k">Last session</div><div class="v" id="dLast">—</div></div>
      <a class="btn ghost" href="./history.html">Open History</a>
    </div>
    <div class="drawer-card">
      <div class="help">Tip: camera access requires HTTPS (you have it on Vercel). Start button must be tapped by a human.</div>
    </div>
  </aside>

  <div class="modal-wrap" id="modalWrap" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="modal-head">
        <div class="modal-title" id="modalTitle">Save</div>
        <button class="icon-btn" id="modalClose" type="button" aria-label="Close">✕</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
      <div class="modal-foot">
        <button class="btn ghost" id="modalSave" type="button">Save</button>
      </div>
    </div>
  </div>

  <div id="toastHost" class="toast-host" aria-live="polite" aria-atomic="true"></div>

  <script type="module" src="../js/app.js"></script>
</body>
</html>
